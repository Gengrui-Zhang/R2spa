---
title             : "Methods Draft"

author: 
  - name          : "Jimmy"

bibliography      : "r-references.bib"

floatsintext      : no
linenumbers       : yes
draft             : no
mask              : no

figurelist        : no
tablelist         : no
footnotelist      : no

classoption       : "man"
header-includes   :
  - |
    \makeatletter
    \renewcommand{\paragraph}{\@startsection{paragraph}{4}{\parindent}%
      {0\baselineskip \@plus 0.2ex \@minus 0.2ex}%
      {-1em}%
      {\normalfont\normalsize\bfseries\typesectitle}}
    
    \renewcommand{\subparagraph}[1]{\@startsection{subparagraph}{5}{1em}%
      {0\baselineskip \@plus 0.2ex \@minus 0.2ex}%
      {-\z@\relax}%
      {\normalfont\normalsize\bfseries\itshape\hspace{\parindent}{#1}\textit{\addperi}}{\relax}}
    \makeatother

csl               : "`r system.file('rmd', 'apa7.csl', package = 'papaja')`"
documentclass     : "apa7"
output            : papaja::apa6_pdf
---

```{r setup, include = FALSE}
library("papaja")
r_refs("r-references.bib")
```

```{r analysis-preferences}
# Seed for random number generation
set.seed(42)
knitr::opts_chunk$set(cache.extra = knitr::rand_seed)
```

# Method

## Design of the Simulation

The design of our simulation study was adapted from Hsiao, Kwok, and Lai (2021). We proposed a new method (i.e., 2SPA) for estimating latent interaction effects and compared it to two other approaches (i.e., UPI, RAPI). The simulated population data were generated from a model with preset parameter values:

\begin{equation}
\begin{gathered}
X_{i} = \tau_{X_{i}} + \lambda_{X_{i}}\xi_{X} + \delta_{X_{i}};\\
M_{i} = \tau_{M_{i}} + \lambda_{M_{i}}\xi_{M} + \delta_{M_{i}};\\
Y_{i} = \tau_{Y_{i}} + 0.3\xi_{X} + 0.3\xi_{M} + 0.3\xi_{XM} + \zeta_{i},
\end{gathered}
\end{equation}

where the path coefficients of the structural model with two latent predictors and their interaction term being 0.3. The latent variables $\xi_{X}$ and $\xi_{XM}$ were simulated from standard normal distribution with means of 0 and variances fixed at 1, each indicated by three items (i.e., $\xi_{X}$ with [$X_{1}$, $X_{2}$, $X_{3}$]; $\xi_{M}$ with [$M_{1}$, $M_{2}$, $M_{3}$]). The $X_{i}$ and $M_{i}$ indicators and the dependent variable $Y_{i}$ were all observed continuous variables with normally distributed errors. The $\tau_{X_{i}}$, $\tau_{M_{i}}$, and $\tau_{Y_{i}}$ were their corresponding constant intercepts.

In the measurement model, the $\lambda_{X_{i}}$ and $\lambda_{M_{i}}$ represent the factor loadings of the $i$th 
indicator on $\xi_{X}$ and $\xi_{M}$ respectively. Specifically, the first two loadings of the latent predictors were set to fixed values of 1.0 and 0.9 (i.e., $\lambda_{X_{1}} = \lambda_{M_{1}} = 1.0$, $\lambda_{X_{2}} = \lambda_{M_{2}} = 0.9$), whereas the third loading varies with three levels (i.e., $\lambda_{X_{3}} = \lambda_{M_{3}} = [0.75, 0.80, 0.85]$). Then, the third indicator should reflect three levels of loading differences with the first and second indicators (i.e., large difference: [1.0, 0.9, 0.75]; medium difference: [1.0, 0.9, 0.8]; small difference: [1.0, 0.9, 0.85]). We included these three conditions to explore the impact of loading differences on simulation results. 

The $\delta_{X_{i}}$ and $\delta_{M_{i}}$ were the residual factors of the $i$th indicator with variances $\theta_{X_{i}}$ and $\theta_{M_{i}}$ respective, whereas the $\zeta$ was the error term for $Y$ with variance $\Psi_{Y_{i}}$. All of them followed normal distribution with means of 0. They all have homogeneous distribution with central location at 0 and independent of each other, and further independently distributed of two latent variables $\xi_{X}$ and $\xi_{M}$. 

For the UPI method, the $\xi_{XM}$ was indicated by the all-pair configuration of the indicators: $x_{1}m_{1}$, $x_{1}m_{2}$, $x_{1}m_{3}$, $x_{2}m_{1}$, $x_{2}m_{2}$, $x_{2}m_{3}$, $x_{3}m_{1}$, $x_{3}m_{2}$, $x_{3}m_{3}$. As for the RAPI and 2SPA method, the $\xi_{XM}$ was loaded by a single indicator depending on the procedure of each method. Specifically, the indicator of the RAPI method was composite scores of indicators of $\xi_{X}$ and $\xi_{M}$ respectively, while that of the 2SPA method was pre-computed factor scores using corresponding indicators.

The range of researcher-manipulated sample sizes choices covered in published research reports about latent interaction methods spanned from 20 to 5,000 (Chin, Marcolin, $\&$ Newsted, 2003; Lin et al., 2010; Cham et al., 2012; Marsh et al., 2014), with commonly seen choices spanning from 100 to 500. In Hsiao et al. (2018), Hsiao, Kwok, $\&$ Lai (2021), and Chin, Marcolin, $\&$ Newsted (2003), the UPI and RAPI methods reached relatively unbiased estimates of the interaction effects at $N \ge 500$, whereas the performance under small sample sizes deserved more evaluations and comparisons. Hence we chose N = 250 and 500 as our sample size conditions. 

As adapted from the study in Hsiao, Kwok, $\&$ Lai (2021), we pre-specified three population correlations between latent predictors ($\rho_{\xi_{X}\xi_{M}}$): 0, 0.3, 0.6, in which the error variance of Y, $\Psi_{Y}$, is 0.82, 0.766, 0.712 at $\rho_{\xi_{X}\xi_{M}}$ = 0, 0.3, 0.6. For the RAPI methods, we manipulated the reliability of indicators with three levels: 0.7, 0.8, and 0.9. Varied reliability level resulted in three levels of error variance of the exogenous variables. Then, congeneric items were formed from manipulating error variances of the three indicators proportionally for the corresponding latent variables. We kept the proportions of constrained error variances of three indicators from Hsiao, Kwok, $\&$ Lai (2021) the same, such that the first indicator covered 44$\%$ of the total error variances, the second indicator covered 33$\%$, and 23$\%$ of the last indicator. Hence, the current study has a $2 \times 3 \times 3 \times 3$ design with two sample size choices, three factor loading combinations, three correlation levels between latent predictors, and three levels of reliability.

## Evaluation Criteria

We applied four evaluation criteria to evaluate the performance of the three methods on accuracy and precision in estimating the interaction effects (i.e., $\gamma_{3}$). 

The standardized bias and 95$\%$ confidence interval (CI) coverage rate were used to evaluate the bias, and measure the accuracy, of the interaction effect estimates. The bias (B) is defined as the average difference between the sample estimator and the preset population parameter:

\begin{equation}
B(\gamma_{3}) = R^{-1}\Sigma^{R}_{r = 1}(\hat{\gamma_{3r}} - \gamma_{3}),
\end{equation}

where R is the total number of replications that counts from 1 to 2,000. The $\hat{\gamma_{3r}}$ denotes the estimated interaction effect in each replication r and the $\gamma_{3}$ denotes the population parameter (0.3). To calculate the standardized bias (SB), the standard error of sample estimated parameter should be obtained from replications and divided by calculated bias:

\begin{equation}
SB = \frac{B(\gamma_{3})}{SE_{\gamma_{3}}},
\end{equation}

where $SE_{\gamma_{3}}$ is the standard error of interaction parameter. Collins, Schafer, and Kam (2001) suggested that an absolute value of $\le 0.40$ would be considered acceptable for each condition.

As for the 95$\%$CI coverage rate, it was calculated as the proportion of replications in which the Wald CI for each replication captures the $\gamma_{3}$. A coverage rate of $> 91\%$ is considered acceptable (Muthén $\&$ Muthén, 2002).

Next, the relative standard error (SE) bias was used to evaluate the precision of the interaction effect estimates. This criterion compared the empirical standard deviation of the interaction estimates with the average standard error across replications:

\begin{equation}
Relative\ SE\ Bias = \frac{R^{-1}\Sigma^{R}_{r = 1}(\widehat{SE_{r}} - SD)}{SD},
\end{equation}

where $\widehat{SE_{r}}$ is the standard error of interaction effect estimate in a single replication cycle and $SD$ is the empirical standard deviation of the interaction estimates obtained from all replications. Smaller relative SE bias represents less variability across replications in each simulation condition, which is more desired. Estimators with absolute values of RSE bias $\le 10\%$ would be regarded acceptable and indicate that the standard error is reasonably unbiased (Hoogland $\&$ Boomsma, 1998).

The last criterion was the root mean squre error (RMSE), calculated by taking the squared root of the sum of squared bias:

\begin{equation}
RMSE = \sqrt{R^{-1}\Sigma^{R}_{r = 1}(\hat{\gamma_{3r}} - \gamma_{3})^2}.
\end{equation}

It quantifies both the bias and variability of the interaction effect estimates across replications. A smaller RMSE value would indicate that the replication result of one condition across 2,000 replications had relatively more accuracy and precision.
